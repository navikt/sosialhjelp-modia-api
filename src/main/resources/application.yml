spring:
  main:
    banner-mode: 'off'
  application:
    name: "sosialhjelp-modia-api"
  redis:
    host: ${REDIS_HOST}
    port: 6379
    password: ${REDIS_PASSWORD}

modia:
  cache:
    redis_mocked: false
    time_to_live_seconds: ${CACHE_TIME_TO_LIVE_SECONDS}
    fiks_cache_enabled: false

server:
  port: 8383
  servlet:
    context-path: '/sosialhjelp/modia-api'

# Prometheus
management:
  endpoints:
    web:
      base-path: "/internal"
      exposure:
        include: info, health, metrics, prometheus

#Environment-variabler som settes av NAIS
client:
  abac_pdp_endpoint_url: ${ABAC_PDP_ENDPOINT_URL}
  fiks_digisos_endpoint_url: ${FIKS_DIGISOS_ENDPOINT_URL}
  fiks_integrasjonid: ${INTEGRASJONSID_FIKS}
  fiks_integrasjonid_kommune: ${INTEGRASJONSID_FIKS_KOMMUNE}
  fiks_integrasjonpassord: ${INTEGRASJONPASSORD_FIKS}
  fiks_integrasjonpassord_kommune: ${INTEGRASJONPASSORD_FIKS_KOMMUNE}
  norg_endpoint_url: ${NORG_ENDPOINT_URL}
  norg_oppslag_url: ${NORG_OPPSLAG_URL:https://norg2-frontend.nais.adeo.no/#/startsok?enhetNr=}
  pdl_endpoint_url: ${PDL_ENDPOINT_URL}
  sts_token_endpoint_url: ${STS_TOKEN_ENDPOINT_URL}
  unleash_url: ${UNLEASH_API_URL}
  unleash_instance_id: ${UNLEASH_INSTANCE_ID}

no.nav.sosialhjelp.idporten:
  token_url: ${ID_PORTEN_TOKEN_URL}
  client_id: ${ID_PORTEN_CLIENT_ID}
  scope: ${ID_PORTEN_SCOPE}
  config_url: ${ID_PORTEN_CONFIG_URL}
  truststore_type: ${TRUSTSTORE_TYPE}
  truststore_filepath: ${TRUSTSTORE_FILEPATH}

#Token-validering
no.nav.security.jwt:
  issuer.azuread:
    discoveryurl: ${AZURE_APP_WELL_KNOWN_URL}
    accepted_audience: ${AZURE_APP_CLIENT_ID}, api://${AZURE_APP_CLIENT_ID}
  client:
    registration:
      onbehalfof:
        token-endpoint-url: https://login.microsoftonline.com/${AZURE_APP_TENANT_ID}/oauth2/v2.0/token
        grant-type: urn:ietf:params:oauth:grant-type:jwt-bearer
        scope: https://graph.microsoft.com/.default
        authentication:
          client-id: ${AZURE_APP_CLIENT_ID}
          client-secret: ${AZURE_APP_CLIENT_SECRET}
          client-auth-method: client_secret_basic

loginurl: ${LOGINURL:http://localhost:8383/sosialhjelp/modia-api/local/cookie} # TODO: må fikses når vi finner ut url i miljø.
